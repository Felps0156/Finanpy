{% extends 'base.html' %}

{% block title %}Dashboard - Finanpy{% endblock %}

{% block content %}
<div class="space-y-8">
    <!-- Header -->
    <div class="flex flex-col gap-4 md:flex-row md:items-center md:justify-between">
        <div>
            <h1 class="text-3xl font-bold tracking-tight text-white">Dashboard</h1>
            <p class="text-zinc-400">Visão geral das suas finanças.</p>
        </div>
        <div class="flex items-center gap-3">
            <a href="{% url 'accounts:create' %}" class="rounded-lg border border-zinc-700 px-4 py-2 text-sm font-semibold text-zinc-300 hover:bg-zinc-800 hover:text-white transition-colors">
                Nova conta
            </a>
            <a href="{% url 'transactions:create' %}" class="rounded-lg bg-indigo-600 px-4 py-2 text-sm font-semibold text-white hover:bg-indigo-500 shadow-lg shadow-indigo-500/20 transition-all hover:scale-105">
                + Nova transação
            </a>
        </div>
    </div>

    <!-- Stats Grid -->
    <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
        <!-- Total Entradas -->
        <div class="group relative overflow-hidden rounded-2xl border border-zinc-800 bg-zinc-900/50 p-6 hover:border-emerald-500/30 transition-colors">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm font-medium text-zinc-400">Entradas</p>
                    <p class="mt-2 text-3xl font-bold text-white">R$ {{ total_entries|floatformat:2 }}</p>
                </div>
                <div class="rounded-full bg-emerald-500/10 p-3 text-emerald-500 group-hover:bg-emerald-500/20 transition-colors">
                    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941" />
                    </svg>
                </div>
            </div>
        </div>

        <!-- Total Saídas -->
        <div class="group relative overflow-hidden rounded-2xl border border-zinc-800 bg-zinc-900/50 p-6 hover:border-rose-500/30 transition-colors">
             <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm font-medium text-zinc-400">Saídas</p>
                    <p class="mt-2 text-3xl font-bold text-white">R$ {{ total_exits|floatformat:2 }}</p>
                </div>
                <div class="rounded-full bg-rose-500/10 p-3 text-rose-500 group-hover:bg-rose-500/20 transition-colors">
                    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6L9 12.75l4.286-4.286a11.948 11.948 0 014.306 5.189l4.969-1.656m0 0l-2.29-5.938m2.29 5.938l-5.94 2.28" />
                    </svg>
                </div>
            </div>
        </div>

        <!-- Saldo Total -->
        <div class="group relative overflow-hidden rounded-2xl border border-zinc-800 bg-zinc-900/50 p-6 hover:border-indigo-500/30 transition-colors">
             <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm font-medium text-zinc-400">Saldo Total</p>
                    <p class="mt-2 text-3xl font-bold text-white">R$ {{ accounts_total|floatformat:2 }}</p>
                </div>
                <div class="rounded-full bg-indigo-500/10 p-3 text-indigo-500 group-hover:bg-indigo-500/20 transition-colors">
                    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 002.25-2.25V6.75A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25v10.5A2.25 2.25 0 004.5 19.5z" />
                    </svg>
                </div>
            </div>
        </div>
    </div>

    <!-- Recent Transactions Section -->
    <div class="grid gap-6 lg:grid-cols-3">
        <!-- List -->
        <div class="lg:col-span-2 rounded-2xl border border-zinc-800 bg-zinc-900/50 p-6">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-lg font-bold text-white">Transações Recentes</h2>
                <a href="{% url 'transactions:list' %}" class="text-sm font-medium text-indigo-400 hover:text-indigo-300 hover:underline">Ver todas</a>
            </div>
            
            {% if recent_transactions %}
                <div class="space-y-4">
                    {% for tx in recent_transactions %}
                        <div class="flex items-center justify-between rounded-xl border border-zinc-800/50 bg-zinc-950/50 p-4 hover:border-zinc-700 transition-colors">
                            <div class="flex items-center gap-4">
                                <div class="h-10 w-10 rounded-full flex items-center justify-center 
                                    {% if tx.category.type == 'entrada' %}bg-emerald-500/10 text-emerald-500{% else %}bg-rose-500/10 text-rose-500{% endif %}">
                                    {% if tx.category.type == 'entrada' %}
                                        <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                                        </svg>
                                    {% else %}
                                        <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 12h-15" />
                                        </svg>
                                    {% endif %}
                                </div>
                                <div>
                                    <p class="font-medium text-white">{{ tx.category.name }}</p>
                                    <p class="text-xs text-zinc-500">{{ tx.account.name }} • {{ tx.date|date:'d/m/Y' }}</p>
                                </div>
                            </div>
                            <span class="font-semibold {% if tx.category.type == 'entrada' %}text-emerald-400{% else %}text-rose-400{% endif %}">
                                {% if tx.category.type == 'entrada' %}+{% else %}-{% endif %} R$ {{ tx.amount|floatformat:2 }}
                            </span>
                        </div>
                    {% endfor %}
                </div>
            {% else %}
                <div class="flex flex-col items-center justify-center py-12 text-center">
                    <div class="h-12 w-12 rounded-full bg-zinc-800 flex items-center justify-center text-zinc-500">
                         <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 9.776c.112-.017.227-.026.344-.026h15.812c.117 0 .232.009.344.026m-16.5 0a2.25 2.25 0 00-1.883 2.542l.857 6a2.25 2.25 0 002.227 1.932H19.05a2.25 2.25 0 002.227-1.932l.857-6a2.25 2.25 0 00-1.883-2.542m-16.5 0V6A2.25 2.25 0 016 3.75h3.879a1.5 1.5 0 011.06.44l2.122 2.12a1.5 1.5 0 001.06.44H18A2.25 2.25 0 0120.25 9v.776" />
                        </svg>
                    </div>
                    <p class="mt-4 text-sm font-medium text-zinc-400">Nenhuma transação recente.</p>
                </div>
            {% endif %}
        </div>
        
        <!-- Tips / Quick Actions -->
         <div class="rounded-2xl border border-zinc-800 bg-zinc-900/50 p-6">
            <h2 class="text-lg font-bold text-white mb-4">Dicas Financeiras</h2>
            <ul class="space-y-4">
                <li class="flex gap-3">
                    <div class="flex-shrink-0 h-2 w-2 mt-2 rounded-full bg-indigo-500"></div>
                    <p class="text-sm text-zinc-400">Organize suas contas separando gastos fixos dos variáveis para melhor controle.</p>
                </li>
                <li class="flex gap-3">
                    <div class="flex-shrink-0 h-2 w-2 mt-2 rounded-full bg-purple-500"></div>
                    <p class="text-sm text-zinc-400">Defina metas de economia mensais e acompanhe seu progresso aqui.</p>
                </li>
                <li class="flex gap-3">
                    <div class="flex-shrink-0 h-2 w-2 mt-2 rounded-full bg-pink-500"></div>
                    <p class="text-sm text-zinc-400">Revise suas assinaturas recorrentes para evitar gastos desnecessários.</p>
                </li>
            </ul>
        </div>
    </div>
</div>
{% endblock %}